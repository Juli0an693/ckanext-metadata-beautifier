{% ckan_extends %}    

{% block resource_additional_information_inner %}
  <style>
    /* Hide the empty separator row */
    .js .table-toggle-more tr.toggle-seperator {
      display: none !important;
    }
  </style>
  <div class="module-content">
    <h2>{{ _("Additional Information") }}</h2>
    <table
      class="table table-striped table-bordered table-condensed"
      data-module="table-toggle-more"
    >
      <thead>
        <tr>
          <th scope="col">{{ _("Field") }}</th>
          <th scope="col">{{ _("Value") }}</th>
        </tr>
      </thead>
      <tbody>
        {# ===== RESOURCE INFORMATION ===== #}
        <tr class="info">
          <th colspan="2" style="text-align: center; font-size: 1.1em">
            {{ _("Resource Information") }}
          </th>
        </tr>

        <tr>
          <th scope="row">
            <i class="fa-regular fa-clock"></i>
            <span>{{ _("Data last updated") }}</span>
            <i
                class="fa-solid fa-circle-info"
                data-bs-toggle="tooltip"
                data-bs-placement="top"
                data-bs-title="{{ _("When the resource data was last changed") }}"
                style="margin-left: 5px"
            ></i>
          </th>
          <td>
            {{ h.render_datetime(res.last_modified) or h.render_datetime(res.created) or _("unknown") }}
          </td>
        </tr>

        <tr>
          <th scope="row">
            <i class="fa-regular fa-calendar-check"></i>
            <span>{{ _("Metadata last updated") }}</span>
            <i
                class="fa-solid fa-circle-info"
                data-bs-toggle="tooltip"
                data-bs-placement="top"
                data-bs-title="{{ _("When this resource's metadata was last updated") }}"
                style="margin-left: 5px"
            ></i>
          </th>
          <td>
            {{ h.render_datetime(res.metadata_modified) or h.render_datetime(res.created) or _("unknown") }}
          </td>
        </tr>

        <tr>
          <th scope="row">
            <i class="fa-regular fa-calendar-plus"></i>
            <span>{{ _("Created") }}</span>
            <i
                class="fa-solid fa-circle-info"
                data-bs-toggle="tooltip"
                data-bs-placement="top"
                data-bs-title="{{ _("When this resource was created") }}"
                style="margin-left: 5px"
            ></i>
          </th>
          <td>{{ h.render_datetime(res.created) or _("unknown") }}</td>
        </tr>

        <tr>
          <th scope="row">
            <i class="fa-regular fa-file-lines"></i>
            <span>{{ _("Format") }}</span>
            <i
                class="fa-solid fa-circle-info"
                data-bs-toggle="tooltip"
                data-bs-placement="top"
                data-bs-title="{{ _("File format or MIME type") }}"
                style="margin-left: 5px"
            ></i>
          </th>
          <td>{{ res.format or res.mimetype_inner or res.mimetype or _("unknown") }}</td>
        </tr>

        <tr>
          <th scope="row">
            <i class="fa-regular fa-file-lines"></i>
            <span>{{ _("License") }}</span>
            <i
                class="fa-solid fa-circle-info"
                data-bs-toggle="tooltip"
                data-bs-placement="top"
                data-bs-title="{{ _("License governing use of this dataset") }}"
                style="margin-left: 5px"
            ></i>
          </th>
          <td>{% snippet "snippets/license.html", pkg_dict=pkg, text_only=True %}</td>
        </tr>

        {# Resource URL #}
        {% if res.url %}
          <tr>
            <th scope="row">
              <i class="fa-regular fa-file"></i>
              <span>{{ _("Resource URL") }}</span>
              <i
                  class="fa-solid fa-circle-info"
                  data-bs-toggle="tooltip"
                  data-bs-placement="top"
                  data-bs-title="{{ _("Direct link to the resource") }}"
                  style="margin-left: 5px"
              ></i>
            </th>
            <td class="text-break">
              <a href="{{ res.url }}" target="_blank" rel="noopener">
                {{ res.url }}
              </a>
            </td>
          </tr>
        {% endif %}

        {# Dataset Information #}
        <tr>
          <th scope="row">
            <i class="fa-regular fa-folder-open"></i>
            <span>{{ _("Dataset URL") }}</span>
            <i
                class="fa-solid fa-circle-info"
                data-bs-toggle="tooltip"
                data-bs-placement="top"
                data-bs-title="{{ _("Link to the dataset that contains this resource") }}"
                style="margin-left: 5px"
            ></i>
          </th>
          <td class="text-break">
            <a href="{{ h.url_for(pkg.type ~ '.read', id=pkg.name, qualified=True) }}">
              {{ h.url_for(pkg.type ~ '.read', id=pkg.name, qualified=True) }}
            </a>
          </td>
        </tr>

        {% if pkg.author %}
          <tr>
            <th scope="row">
              <i class="fa-regular fa-user"></i>
              <span>{{ _("Author") }}</span>
              <i
                  class="fa-solid fa-circle-info"
                  data-bs-toggle="tooltip"
                  data-bs-placement="top"
                  data-bs-title="{{ _("Person or organization that created this dataset") }}"
                  style="margin-left: 5px"
              ></i>
            </th>
            <td>
              {{ pkg.author }}
              {% if pkg.author_email %}
                (
                <a href="mailto:{{ pkg.author_email }}">
                  {{ pkg.author_email }}
                </a>
                )
              {% endif %}
            </td>
          </tr>
        {% endif %}

        {% if pkg.maintainer %}
          <tr>
            <th scope="row">
              <i class="fa-regular fa-user"></i>
              <span>{{ _("Maintainer") }}</span>
              <i
                  class="fa-solid fa-circle-info"
                  data-bs-toggle="tooltip"
                  data-bs-placement="top"
                  data-bs-title="{{ _("Person responsible for maintaining this dataset") }}"
                  style="margin-left: 5px"
              ></i>
            </th>
            <td>
              {{ pkg.maintainer }}
              {% if pkg.maintainer_email %}
                (
                <a href="mailto:{{ pkg.maintainer_email }}">
                  {{ pkg.maintainer_email }}
                </a>
                )
              {% endif %}
            </td>
          </tr>
        {% endif %}

        {# Additional resource metadata #}
        {% if res.size %}
          <tr>
            <th scope="row">
              <i class="fa-regular fa-file"></i>
              <span>{{ _("File Size") }}</span>
              <i
                  class="fa-solid fa-circle-info"
                  data-bs-toggle="tooltip"
                  data-bs-placement="top"
                  data-bs-title="{{ _("Size of the resource file") }}"
                  style="margin-left: 5px"
              ></i>
            </th>
            <td>{{ h.filesize(res.size) }}</td>
          </tr>
        {% endif %}

        {% if res.hash %}
          <tr>
            <th scope="row">
              <i class="fa-regular fa-clipboard"></i>
              <span>{{ _("Hash") }}</span>
              <i
                  class="fa-solid fa-circle-info"
                  data-bs-toggle="tooltip"
                  data-bs-placement="top"
                  data-bs-title="{{ _("Checksum for verifying the resource") }}"
                  style="margin-left: 5px"
              ></i>
            </th>
            <td><code>{{ res.hash }}</code></td>
          </tr>
        {% endif %}

        {# Additional resource fields #}
        {% for key, value in h.format_resource_items(res.items()) %}
          {% if key not in ('created', 'metadata modified', 'last modified', 'format') %}
            <tr>
              <th scope="row">
                <i class="fa-regular fa-circle-dot"></i>
                <span>{{ key | capitalize }}</span>
                <i
                    class="fa-solid fa-circle-info"
                    data-bs-toggle="tooltip"
                    data-bs-placement="top"
                    data-bs-title="{{ _(key) }}"
                    style="margin-left: 5px"
                ></i>
              </th>
              <td>{{ value }}</td>
            </tr>
          {% endif %}
        {% endfor %}

        {# ===== TECHNICAL DATA ===== #}
        <tr class="info">
          <th colspan="2" style="text-align: center; font-size: 1.1em">
            {{ _("Technical Data") }}
          </th>
        </tr>

        {# Technical IDs #}
        <tr>
          <th scope="row">
            <i class="fa-regular fa-id-badge"></i>
            <span>{{ _("Resource ID") }}</span>
            <i
                class="fa-solid fa-circle-info"
                data-bs-toggle="tooltip"
                data-bs-placement="top"
                data-bs-title="{{ _("Unique identifier for this resource") }}"
                style="margin-left: 5px"
            ></i>
          </th>
          <td><code>{{ res.id }}</code></td>
        </tr>

        <tr>
          <th scope="row">
            <i class="fa-regular fa-bookmark"></i>
            <span>{{ _("Package ID") }}</span>
            <i
                class="fa-solid fa-circle-info"
                data-bs-toggle="tooltip"
                data-bs-placement="top"
                data-bs-title="{{ _("Unique identifier for the dataset") }}"
                style="margin-left: 5px"
            ></i>
          </th>
          <td><code>{{ pkg.id }}</code></td>
        </tr>

        {% if pkg.owner_org %}
          <tr>
            <th scope="row">
              <i class="fa-regular fa-building"></i>
              <span>{{ _("Organization ID") }}</span>
              <i
                  class="fa-solid fa-circle-info"
                  data-bs-toggle="tooltip"
                  data-bs-placement="top"
                  data-bs-title="{{ _("ID of the owning organization") }}"
                  style="margin-left: 5px"
              ></i>
            </th>
            <td><code>{{ pkg.owner_org }}</code></td>
          </tr>
        {% endif %}

        {% if res.package_id %}
          <tr>
            <th scope="row">
              <i class="fa-regular fa-bookmark"></i>
              <span>{{ _("Package ID (from resource)") }}</span>
              <i
                  class="fa-solid fa-circle-info"
                  data-bs-toggle="tooltip"
                  data-bs-placement="top"
                  data-bs-title="{{ _("Dataset ID referenced by this resource") }}"
                  style="margin-left: 5px"
              ></i>
            </th>
            <td><code>{{ res.package_id }}</code></td>
          </tr>
        {% endif %}

        {# API Commands #}
        <tr>
          <th scope="row">
            <i class="fa-regular fa-rectangle-list"></i>
            <span>{{ _("API - package_show") }}</span>
            <i
                class="fa-solid fa-circle-info"
                data-bs-toggle="tooltip"
                data-bs-placement="top"
                data-bs-title="{{ _("API endpoint for dataset details") }}"
                style="margin-left: 5px"
            ></i>
          </th>
          <td class="text-break">
            <a
              href="{{ h.url_for('api.action', ver=3, logic_function='package_show', qualified=True) }}?id={{ pkg.id }}"
              target="_blank"
            >
              {{ h.url_for('api.action', ver=3, logic_function='package_show', qualified=True) }}?id={{ pkg.id }}
            </a>
          </td>
        </tr>

        <tr>
          <th scope="row">
            <i class="fa-regular fa-rectangle-list"></i>
            <span>{{ _("API - resource_show") }}</span>
            <i
                class="fa-solid fa-circle-info"
                data-bs-toggle="tooltip"
                data-bs-placement="top"
                data-bs-title="{{ _("API endpoint for resource details") }}"
                style="margin-left: 5px"
            ></i>
          </th>
          <td class="text-break">
            <a
              href="{{ h.url_for('api.action', ver=3, logic_function='resource_show', qualified=True) }}?id={{ res.id }}"
              target="_blank"
            >
              {{ h.url_for('api.action', ver=3, logic_function='resource_show', qualified=True) }}?id={{ res.id }}
            </a>
          </td>
        </tr>

        {# Metadata Downloads #}
        <tr>
          <th scope="row">
            <i class="fa-regular fa-file-lines"></i>
            <span>{{ _("Metadata (RDF)") }}</span>
            <i
                class="fa-solid fa-circle-info"
                data-bs-toggle="tooltip"
                data-bs-placement="top"
                data-bs-title="{{ _("Download metadata in RDF format") }}"
                style="margin-left: 5px"
            ></i>
          </th>
          <td class="text-break">
            <a href="{{ h.url_for(pkg.type ~ '.read', id=pkg.name, qualified=True) }}.rdf">
              {{ h.url_for(pkg.type ~ '.read', id=pkg.name, qualified=True) }}.rdf
            </a>
          </td>
        </tr>

        <tr>
          <th scope="row">
            <i class="fa-regular fa-file-lines"></i>
            <span>{{ _("Metadata (JSON)") }}</span>
            <i
                class="fa-solid fa-circle-info"
                data-bs-toggle="tooltip"
                data-bs-placement="top"
                data-bs-title="{{ _("Download metadata in JSON format") }}"
                style="margin-left: 5px"
            ></i>
          </th>
          <td class="text-break">
            <a
              href="{{ h.url_for('api.action', ver=3, logic_function='package_show', qualified=True) }}?id={{ pkg.id }}"
              target="_blank"
            >
              JSON
            </a>
          </td>
        </tr>
      </tbody>
    </table>
  </div>
{% endblock %}



{% block scripts %}
    {{ super() }}
    <script>
        // Initialize Bootstrap tooltips
        document.addEventListener("DOMContentLoaded", function () {
            var tooltipTriggerList = [].slice.call(
                document.querySelectorAll('[data-bs-toggle="tooltip"]'),
            );
            tooltipTriggerList.map(function (tooltipTriggerEl) {
                return new bootstrap.Tooltip(tooltipTriggerEl);
            });
        });
    </script>
{% endblock %}